<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Gifts</title>
    <style>
        :root {
            --primary: #0088cc;
            --secondary: #2a2f3b;
            --accent: #ff6b35;
            --light: #f5f5f5;
            --dark: #1a1d24;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--dark);
            color: var(--light);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            background-color: var(--secondary);
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .balance {
            background-color: var(--primary);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        
        .balance i {
            margin-right: 5px;
        }
        
        .user-profile {
            position: relative;
            cursor: pointer;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            overflow: hidden;
        }
        
        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .dropdown-menu {
            position: absolute;
            top: 50px;
            right: 0;
            background-color: var(--secondary);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            width: 250px;
            padding: 15px;
            z-index: 100;
            display: none;
        }
        
        .dropdown-menu.active {
            display: block;
        }
        
        .dropdown-item {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        
        .dropdown-item:last-child {
            border-bottom: none;
        }
        
        .dropdown-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            padding: 30px 0;
        }
        
        .section-title {
            margin-bottom: 20px;
            font-size: 22px;
            color: var(--primary);
        }
        
        .buttons-container {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
        }
        
        /* Cases */
        .cases-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .case-card {
            background-color: var(--secondary);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }
        
        .case-card:hover {
            transform: translateY(-5px);
        }
        
        .case-image {
            height: 180px;
            background-color: var(--dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
        }
        
        .case-info {
            padding: 15px;
        }
        
        .case-name {
            font-size: 18px;
            margin-bottom: 10px;
        }
        
        .case-price {
            color: var(--accent);
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .case-items {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
        }
        
        .item-preview {
            width: 30px;
            height: 30px;
            border-radius: 5px;
            background-color: var(--dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        /* Inventory */
        .inventory-title {
            margin: 30px 0 15px;
            font-size: 20px;
        }
        
        .inventory-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }
        
        .inventory-item {
            background-color: var(--secondary);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            position: relative;
        }
        
        .item-image {
            width: 60px;
            height: 60px;
            margin: 0 auto 10px;
            border-radius: 8px;
            background-color: var(--dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .item-name {
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .item-value {
            color: var(--accent);
            font-size: 12px;
            margin-bottom: 10px;
        }
        
        .sell-btn {
            background-color: var(--accent);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
            width: 100%;
        }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background-color: var(--secondary);
            border-radius: 10px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }
        
        .modal-title {
            margin-bottom: 20px;
            font-size: 22px;
            color: var(--primary);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background-color: var(--dark);
            color: white;
        }
        
        .captcha-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .captcha-code {
            background-color: var(--dark);
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            letter-spacing: 5px;
            font-size: 20px;
        }
        
        .captcha-input {
            flex: 1;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        /* Case Opening Animation */
        .case-opening {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            display: none;
        }
        
        .case-opening.active {
            display: flex;
        }
        
        .case-reward {
            text-align: center;
            animation: pulse 1.5s infinite;
        }
        
        .reward-image {
            width: 200px;
            height: 200px;
            margin: 0 auto 20px;
            border-radius: 10px;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            box-shadow: 0 0 30px rgba(255, 107, 53, 0.5);
        }
        
        .reward-name {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .reward-value {
            color: var(--accent);
            font-size: 18px;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Admin Panel */
        .admin-panel {
            background-color: rgba(255, 107, 53, 0.1);
            border: 1px solid var(--accent);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            display: none;
        }
        
        .admin-panel.active {
            display: block;
        }
        
        .admin-title {
            color: var(--accent);
            margin-bottom: 15px;
        }
        
        .admin-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .buttons-container {
                flex-direction: column;
            }
            
            .cases-container {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">Telegram Gifts</div>
                <div class="balance">
                    <i>‚òÖ</i> <span id="balance">0</span>
                </div>
                <div class="user-profile">
                    <div class="avatar" id="user-avatar">
                        <span>U</span>
                    </div>
                    <div class="dropdown-menu" id="dropdown-menu">
                        <div class="dropdown-item" id="change-avatar">
                            <i>üë§</i> –°–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä
                        </div>
                        <div class="dropdown-item" id="promo-code">
                            <i>üéÅ</i> –ü—Ä–æ–º–æ–∫–æ–¥
                        </div>
                        <div class="dropdown-item" id="best-drop">
                            <i>üèÜ</i> –õ—É—á—à–µ–µ –ø–∞–¥–µ–Ω–∏–µ
                        </div>
                        <div class="dropdown-item" id="statistics">
                            <i>üìä</i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="main-content">
            <h1 class="section-title">–ö–µ–π—Å—ã</h1>
            
            <div class="buttons-container">
                <button class="btn btn-primary" id="cases-btn">–ö–µ–π—Å—ã</button>
                <button class="btn btn-secondary" id="refresh-btn">–û–±–Ω–æ–≤–∏—Ç—å</button>
                <button class="btn btn-secondary" id="leaders-btn">–õ–∏–¥–µ—Ä—ã</button>
            </div>
            
            <!-- Admin Panel (only for BayRex) -->
            <div class="admin-panel" id="admin-panel">
                <h3 class="admin-title">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                <div class="admin-controls">
                    <input type="text" class="form-control" id="username-input" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                    <input type="number" class="form-control" id="balance-input" placeholder="–ë–∞–ª–∞–Ω—Å">
                    <button class="btn btn-primary" id="set-balance-btn">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
                </div>
            </div>
            
            <!-- Free Cases -->
            <h2 class="section-title">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∫–µ–π—Å—ã</h2>
            <div class="cases-container">
                <div class="case-card" data-case="daily">
                    <div class="case-image">üì¶</div>
                    <div class="case-info">
                        <div class="case-name">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∫–µ–π—Å</div>
                        <div class="case-price">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</div>
                        <div class="case-items">
                            <div class="item-preview">üí™</div>
                            <div class="item-preview">üìÖ</div>
                            <div class="item-preview">üßπ</div>
                        </div>
                        <button class="btn btn-primary open-case-btn" data-case="daily">–û—Ç–∫—Ä—ã—Ç—å</button>
                    </div>
                </div>
                
                <div class="case-card" data-case="bomj">
                    <div class="case-image">üì¶</div>
                    <div class="case-info">
                        <div class="case-name">–ë–æ–º–∂–∏–∫</div>
                        <div class="case-price">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</div>
                        <div class="case-items">
                            <div class="item-preview">‚ù§Ô∏è</div>
                            <div class="item-preview">üß∏</div>
                            <div class="item-preview">üåπ</div>
                            <div class="item-preview">üöÄ</div>
                        </div>
                        <button class="btn btn-primary open-case-btn" data-case="bomj">–û—Ç–∫—Ä—ã—Ç—å</button>
                    </div>
                </div>
            </div>
            
            <!-- Paid Cases -->
            <h2 class="section-title">–ü–ª–∞—Ç–Ω—ã–µ –∫–µ–π—Å—ã</h2>
            <div class="cases-container">
                <div class="case-card" data-case="durov">
                    <div class="case-image">üì¶</div>
                    <div class="case-info">
                        <div class="case-name">Durov Case</div>
                        <div class="case-price">100 ‚òÖ</div>
                        <div class="case-items">
                            <div class="item-preview">üê∏</div>
                            <div class="item-preview">üí®</div>
                            <div class="item-preview">üé©</div>
                            <div class="item-preview">üíÑ</div>
                        </div>
                        <button class="btn btn-primary open-case-btn" data-case="durov">–û—Ç–∫—Ä—ã—Ç—å –∑–∞ 100 ‚òÖ</button>
                    </div>
                </div>
                
                <div class="case-card" data-case="bayrex">
                    <div class="case-image">üì¶</div>
                    <div class="case-info">
                        <div class="case-name">BayRex Case</div>
                        <div class="case-price">150 ‚òÖ</div>
                        <div class="case-items">
                            <div class="item-preview">üê∏</div>
                            <div class="item-preview">üí®</div>
                            <div class="item-preview">üé©</div>
                            <div class="item-preview">üíÑ</div>
                        </div>
                        <button class="btn btn-primary open-case-btn" data-case="bayrex">–û—Ç–∫—Ä—ã—Ç—å –∑–∞ 150 ‚òÖ</button>
                    </div>
                </div>
            </div>
            
            <!-- Inventory -->
            <h2 class="inventory-title">–í–∞—à–∏ –ø–æ–¥–∞—Ä–∫–∏</h2>
            <div class="inventory-container" id="inventory">
                <!-- Inventory items will be added here dynamically -->
            </div>
        </div>
    </div>

    <!-- Registration Modal -->
    <div class="modal" id="registration-modal">
        <div class="modal-content">
            <h2 class="modal-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
            <form id="registration-form">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" class="form-control" id="email" required>
                </div>
                <div class="form-group">
                    <label for="username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                    <input type="text" class="form-control" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" class="form-control" id="password" required>
                </div>
                <div class="captcha-container">
                    <div class="captcha-code" id="captcha-code">A1B2C3</div>
                    <input type="text" class="form-control captcha-input" id="captcha-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–∞–ø—á—É" required>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-secondary" id="cancel-registration">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Case Opening Animation -->
    <div class="case-opening" id="case-opening">
        <div class="case-reward">
            <div class="reward-image" id="reward-image">üéÅ</div>
            <div class="reward-name" id="reward-name">Mighty Arm</div>
            <div class="reward-value" id="reward-value">–¶–µ–Ω–∞: 10 ‚òÖ</div>
            <button class="btn btn-primary" id="close-case">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <script>
        // Game Data
        const casesData = {
            daily: {
                name: "–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∫–µ–π—Å",
                price: 0,
                items: [
                    { name: "Mighty Arm", emoji: "üí™", value: 10 },
                    { name: "Desk Calendar", emoji: "üìÖ", value: 15 },
                    { name: "Flying Broom", emoji: "üßπ", value: 20 }
                ]
            },
            bomj: {
                name: "–ë–æ–º–∂–∏–∫",
                price: 0,
                items: [
                    { name: "–°–µ—Ä–¥–µ—á–∫–æ", emoji: "‚ù§Ô∏è", value: 5 },
                    { name: "–ú–∏—à–∫–∞", emoji: "üß∏", value: 8 },
                    { name: "–†–æ–∑–∞", emoji: "üåπ", value: 12 },
                    { name: "–†–∞–∫–µ—Ç–∞", emoji: "üöÄ", value: 18 },
                    { name: "–¶–≤–µ—Ç—ã", emoji: "üíê", value: 15 },
                    { name: "–ê–ª–º–∞–∑", emoji: "üíé", value: 25 }
                ]
            },
            durov: {
                name: "Durov Case",
                price: 100,
                items: [
                    { name: "Plush Pepe (gold)", emoji: "üê∏", value: 50 },
                    { name: "Vintage Sigar", emoji: "üí®", value: 40 },
                    { name: "Top Hat", emoji: "üé©", value: 35 },
                    { name: "Perfume Bottle", emoji: "üíÑ", value: 45 }
                ]
            },
            bayrex: {
                name: "BayRex Case",
                price: 150,
                items: [
                    { name: "Plush Pepe (gold)", emoji: "üê∏", value: 50 },
                    { name: "Vintage Sigar", emoji: "üí®", value: 40 },
                    { name: "Top Hat", emoji: "üé©", value: 35 },
                    { name: "Perfume Bottle", emoji: "üíÑ", value: 45 }
                ]
            }
        };

        // Game State
        let user = {
            email: "",
            username: "",
            balance: 100,
            inventory: [],
            casesOpened: 0,
            isAdmin: false
        };

        // DOM Elements
        const balanceElement = document.getElementById('balance');
        const userAvatar = document.getElementById('user-avatar');
        const dropdownMenu = document.getElementById('dropdown-menu');
        const registrationModal = document.getElementById('registration-modal');
        const registrationForm = document.getElementById('registration-form');
        const cancelRegistration = document.getElementById('cancel-registration');
        const casesBtn = document.getElementById('cases-btn');
        const refreshBtn = document.getElementById('refresh-btn');
        const leadersBtn = document.getElementById('leaders-btn');
        const openCaseBtns = document.querySelectorAll('.open-case-btn');
        const caseOpening = document.getElementById('case-opening');
        const rewardImage = document.getElementById('reward-image');
        const rewardName = document.getElementById('reward-name');
        const rewardValue = document.getElementById('reward-value');
        const closeCase = document.getElementById('close-case');
        const inventoryContainer = document.getElementById('inventory');
        const adminPanel = document.getElementById('admin-panel');
        const setBalanceBtn = document.getElementById('set-balance-btn');
        const usernameInput = document.getElementById('username-input');
        const balanceInput = document.getElementById('balance-input');

        // Initialize the game
        function initGame() {
            // Check if user is registered
            const savedUser = localStorage.getItem('telegramGiftsUser');
            if (savedUser) {
                user = JSON.parse(savedUser);
                updateUI();
            } else {
                // Show registration modal
                registrationModal.classList.add('active');
                generateCaptcha();
            }
        }

        // Generate random captcha
        function generateCaptcha() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let captcha = '';
            for (let i = 0; i < 6; i++) {
                captcha += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            document.getElementById('captcha-code').textContent = captcha;
        }

        // Update UI with user data
        function updateUI() {
            balanceElement.textContent = user.balance;
            
            // Update avatar
            const avatarImg = userAvatar.querySelector('img');
            if (avatarImg) {
                avatarImg.src = user.avatar;
            } else {
                userAvatar.innerHTML = `<span>${user.username.charAt(0).toUpperCase()}</span>`;
            }
            
            // Show admin panel if user is BayRex
            if (user.username === 'BayRex') {
                user.isAdmin = true;
                adminPanel.classList.add('active');
            }
            
            // Update inventory
            renderInventory();
            
            // Save user data
            localStorage.setItem('telegramGiftsUser', JSON.stringify(user));
        }

        // Render inventory items
        function renderInventory() {
            inventoryContainer.innerHTML = '';
            
            if (user.inventory.length === 0) {
                inventoryContainer.innerHTML = '<p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–¥–∞—Ä–∫–æ–≤</p>';
                return;
            }
            
            user.inventory.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = 'inventory-item';
                itemElement.innerHTML = `
                    <div class="item-image">${item.emoji}</div>
                    <div class="item-name">${item.name}</div>
                    <div class="item-value">${item.value} ‚òÖ</div>
                    <button class="sell-btn" data-index="${index}">–ü—Ä–æ–¥–∞—Ç—å –∑–∞ ${item.value} ‚òÖ</button>
                `;
                inventoryContainer.appendChild(itemElement);
            });
            
            // Add event listeners to sell buttons
            document.querySelectorAll('.sell-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    sellItem(index);
                });
            });
        }

        // Open a case
        function openCase(caseType) {
            const caseData = casesData[caseType];
            
            // Check if user has enough balance for paid cases
            if (caseData.price > 0 && user.balance < caseData.price) {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤–µ–∑–¥ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —ç—Ç–æ–≥–æ –∫–µ–π—Å–∞!');
                return;
            }
            
            // Deduct balance for paid cases
            if (caseData.price > 0) {
                user.balance -= caseData.price;
            }
            
            // Get random item from case
            const randomIndex = Math.floor(Math.random() * caseData.items.length);
            const reward = caseData.items[randomIndex];
            
            // Add item to inventory
            user.inventory.push(reward);
            user.casesOpened++;
            
            // Update UI
            updateUI();
            
            // Show reward animation
            rewardImage.textContent = reward.emoji;
            rewardName.textContent = reward.name;
            rewardValue.textContent = `–¶–µ–Ω–∞: ${reward.value} ‚òÖ`;
            caseOpening.classList.add('active');
        }

        // Sell an item
        function sellItem(index) {
            const item = user.inventory[index];
            user.balance += item.value;
            user.inventory.splice(index, 1);
            updateUI();
        }

        // Event Listeners
        userAvatar.addEventListener('click', function() {
            dropdownMenu.classList.toggle('active');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.user-profile')) {
                dropdownMenu.classList.remove('active');
            }
        });

        // Registration form submission
        registrationForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const captchaInput = document.getElementById('captcha-input').value;
            const captchaCode = document.getElementById('captcha-code').textContent;
            
            // Validate captcha
            if (captchaInput !== captchaCode) {
                alert('–ù–µ–≤–µ—Ä–Ω–∞—è –∫–∞–ø—á–∞!');
                generateCaptcha();
                return;
            }
            
            // Register user
            user.email = email;
            user.username = username;
            user.balance = 100;
            user.inventory = [];
            user.casesOpened = 0;
            
            // Close registration modal
            registrationModal.classList.remove('active');
            
            // Update UI
            updateUI();
        });

        cancelRegistration.addEventListener('click', function() {
            registrationModal.classList.remove('active');
        });

        // Case opening buttons
        openCaseBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const caseType = this.getAttribute('data-case');
                openCase(caseType);
            });
        });

        // Close case animation
        closeCase.addEventListener('click', function() {
            caseOpening.classList.remove('active');
        });

        // Change avatar
        document.getElementById('change-avatar').addEventListener('click', function() {
            const avatarUrl = prompt('–í–≤–µ–¥–∏—Ç–µ URL –≤–∞—à–µ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞:');
            if (avatarUrl) {
                userAvatar.innerHTML = `<img src="${avatarUrl}" alt="Avatar">`;
                user.avatar = avatarUrl;
                updateUI();
            }
        });

        // Promo code
        document.getElementById('promo-code').addEventListener('click', function() {
            const promoCode = prompt('–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥:');
            if (promoCode) {
                // Simple promo code check
                if (promoCode.toUpperCase() === 'TELEGRAM2023') {
                    user.balance += 50;
                    updateUI();
                    alert('–ü—Ä–æ–º–æ–∫–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! –í—ã –ø–æ–ª—É—á–∏–ª–∏ 50 ‚òÖ');
                } else {
                    alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥!');
                }
            }
        });

        // Best drop
        document.getElementById('best-drop').addEventListener('click', function() {
            if (user.inventory.length === 0) {
                alert('–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–¥–∞—Ä–∫–æ–≤!');
                return;
            }
            
            let bestItem = user.inventory[0];
            user.inventory.forEach(item => {
                if (item.value > bestItem.value) {
                    bestItem = item;
                }
            });
            
            alert(`–í–∞—à –ª—É—á—à–∏–π –ø–æ–¥–∞—Ä–æ–∫: ${bestItem.name} (${bestItem.emoji}) —Å—Ç–æ–∏–º–æ—Å—Ç—å—é ${bestItem.value} ‚òÖ`);
        });

        // Statistics
        document.getElementById('statistics').addEventListener('click', function() {
            alert(`–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n–û—Ç–∫—Ä—ã—Ç–æ –∫–µ–π—Å–æ–≤: ${user.casesOpened}\n–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∞—Ä–∫–æ–≤: ${user.inventory.length}`);
        });

        // Admin functionality
        setBalanceBtn.addEventListener('click', function() {
            if (!user.isAdmin) {
                alert('–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞!');
                return;
            }
            
            const targetUsername = usernameInput.value;
            const newBalance = parseInt(balanceInput.value);
            
            if (!targetUsername || isNaN(newBalance)) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!');
                return;
            }
            
            // In a real app, this would update the balance on the server
            // For this demo, we'll just show a message
            alert(`–ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${targetUsername} —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ ${newBalance} ‚òÖ`);
            
            // Clear inputs
            usernameInput.value = '';
            balanceInput.value = '';
        });

        // Initialize the game
        initGame();
    </script>
</body>
</html>