<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Gifts</title>
    <style>
        :root {
            --primary: #0088cc;
            --secondary: #2a2f3b;
            --accent: #ff6b35;
            --light: #f5f5f5;
            --dark: #1a1d24;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--dark);
            color: var(--light);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            background-color: var(--secondary);
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .balance {
            background-color: var(--primary);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            display: flex;
            align-items: center;
        }
        
        .balance i {
            margin-right: 5px;
        }
        
        .user-profile {
            position: relative;
            cursor: pointer;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            overflow: hidden;
        }
        
        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .dropdown-menu {
            position: absolute;
            top: 50px;
            right: 0;
            background-color: var(--secondary);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            width: 250px;
            padding: 15px;
            z-index: 100;
            display: none;
        }
        
        .dropdown-menu.active {
            display: block;
        }
        
        .dropdown-item {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        
        .dropdown-item:last-child {
            border-bottom: none;
        }
        
        .dropdown-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            padding: 30px 0;
        }
        
        .section-title {
            margin-bottom: 20px;
            font-size: 22px;
            color: var(--primary);
        }
        
        .buttons-container {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
        }
        
        /* Cases */
        .cases-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .case-card {
            background-color: var(--secondary);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }
        
        .case-card:hover {
            transform: translateY(-5px);
        }
        
        .case-image {
            height: 180px;
            background-color: var(--dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
        }
        
        .case-info {
            padding: 15px;
        }
        
        .case-name {
            font-size: 18px;
            margin-bottom: 10px;
        }
        
        .case-price {
            color: var(--accent);
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .case-items {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
        }
        
        .item-preview {
            width: 30px;
            height: 30px;
            border-radius: 5px;
            background-color: var(--dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        /* Inventory */
        .inventory-title {
            margin: 30px 0 15px;
            font-size: 20px;
        }
        
        .inventory-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }
        
        .inventory-item {
            background-color: var(--secondary);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            position: relative;
        }
        
        .item-image {
            width: 60px;
            height: 60px;
            margin: 0 auto 10px;
            border-radius: 8px;
            background-color: var(--dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .item-name {
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .item-value {
            color: var(--accent);
            font-size: 12px;
            margin-bottom: 10px;
        }
        
        .sell-btn {
            background-color: var(--accent);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
            width: 100%;
        }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background-color: var(--secondary);
            border-radius: 10px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }
        
        .modal-title {
            margin-bottom: 20px;
            font-size: 22px;
            color: var(--primary);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background-color: var(--dark);
            color: white;
        }
        
        .captcha-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .captcha-code {
            background-color: var(--dark);
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            letter-spacing: 5px;
            font-size: 20px;
        }
        
        .captcha-input {
            flex: 1;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        /* Case Opening Animation */
        .case-opening {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            display: none;
        }
        
        .case-opening.active {
            display: flex;
        }
        
        .case-reward {
            text-align: center;
            animation: pulse 1.5s infinite;
        }
        
        .reward-image {
            width: 200px;
            height: 200px;
            margin: 0 auto 20px;
            border-radius: 10px;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            box-shadow: 0 0 30px rgba(255, 107, 53, 0.5);
        }
        
        .reward-name {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .reward-value {
            color: var(--accent);
            font-size: 18px;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Admin Panel */
        .admin-panel {
            background-color: rgba(255, 107, 53, 0.1);
            border: 1px solid var(--accent);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            display: none;
        }
        
        .admin-panel.active {
            display: block;
        }
        
        .admin-title {
            color: var(--accent);
            margin-bottom: 15px;
        }
        
        .admin-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .buttons-container {
                flex-direction: column;
            }
            
            .cases-container {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">Telegram Gifts</div>
                <div class="balance">
                    <i>★</i> <span id="balance">0</span>
                </div>
                <div class="user-profile">
                    <div class="avatar" id="user-avatar">
                        <span>U</span>
                    </div>
                    <div class="dropdown-menu" id="dropdown-menu">
                        <div class="dropdown-item" id="change-avatar">
                            <i>👤</i> Сменить аватар
                        </div>
                        <div class="dropdown-item" id="promo-code">
                            <i>🎁</i> Промокод
                        </div>
                        <div class="dropdown-item" id="best-drop">
                            <i>🏆</i> Лучшее падение
                        </div>
                        <div class="dropdown-item" id="statistics">
                            <i>📊</i> Статистика
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="main-content">
            <h1 class="section-title">Кейсы</h1>
            
            <div class="buttons-container">
                <button class="btn btn-primary" id="cases-btn">Кейсы</button>
                <button class="btn btn-secondary" id="refresh-btn">Обновить</button>
                <button class="btn btn-secondary" id="leaders-btn">Лидеры</button>
            </div>
            
            <!-- Admin Panel (only for BayRex) -->
            <div class="admin-panel" id="admin-panel">
                <h3 class="admin-title">Панель администратора</h3>
                <div class="admin-controls">
                    <input type="text" class="form-control" id="username-input" placeholder="Имя пользователя">
                    <input type="number" class="form-control" id="balance-input" placeholder="Баланс">
                    <button class="btn btn-primary" id="set-balance-btn">Установить баланс</button>
                </div>
            </div>
            
            <!-- Free Cases -->
            <h2 class="section-title">Бесплатные кейсы</h2>
            <div class="cases-container">
                <div class="case-card" data-case="daily">
                    <div class="case-image">📦</div>
                    <div class="case-info">
                        <div class="case-name">Ежедневный кейс</div>
                        <div class="case-price">Бесплатно</div>
                        <div class="case-items">
                            <div class="item-preview">💪</div>
                            <div class="item-preview">📅</div>
                            <div class="item-preview">🧹</div>
                        </div>
                        <button class="btn btn-primary open-case-btn" data-case="daily">Открыть</button>
                    </div>
                </div>
                
                <div class="case-card" data-case="bomj">
                    <div class="case-image">📦</div>
                    <div class="case-info">
                        <div class="case-name">Бомжик</div>
                        <div class="case-price">Бесплатно</div>
                        <div class="case-items">
                            <div class="item-preview">❤️</div>
                            <div class="item-preview">🧸</div>
                            <div class="item-preview">🌹</div>
                            <div class="item-preview">🚀</div>
                        </div>
                        <button class="btn btn-primary open-case-btn" data-case="bomj">Открыть</button>
                    </div>
                </div>
            </div>
            
            <!-- Paid Cases -->
            <h2 class="section-title">Платные кейсы</h2>
            <div class="cases-container">
                <div class="case-card" data-case="durov">
                    <div class="case-image">📦</div>
                    <div class="case-info">
                        <div class="case-name">Durov Case</div>
                        <div class="case-price">100 ★</div>
                        <div class="case-items">
                            <div class="item-preview">🐸</div>
                            <div class="item-preview">💨</div>
                            <div class="item-preview">🎩</div>
                            <div class="item-preview">💄</div>
                        </div>
                        <button class="btn btn-primary open-case-btn" data-case="durov">Открыть за 100 ★</button>
                    </div>
                </div>
                
                <div class="case-card" data-case="bayrex">
                    <div class="case-image">📦</div>
                    <div class="case-info">
                        <div class="case-name">BayRex Case</div>
                        <div class="case-price">150 ★</div>
                        <div class="case-items">
                            <div class="item-preview">🐸</div>
                            <div class="item-preview">💨</div>
                            <div class="item-preview">🎩</div>
                            <div class="item-preview">💄</div>
                        </div>
                        <button class="btn btn-primary open-case-btn" data-case="bayrex">Открыть за 150 ★</button>
                    </div>
                </div>
            </div>
            
            <!-- Inventory -->
            <h2 class="inventory-title">Ваши подарки</h2>
            <div class="inventory-container" id="inventory">
                <!-- Inventory items will be added here dynamically -->
            </div>
        </div>
    </div>

    <!-- Registration Modal -->
    <div class="modal" id="registration-modal">
        <div class="modal-content">
            <h2 class="modal-title">Регистрация</h2>
            <form id="registration-form">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" class="form-control" id="email" required>
                </div>
                <div class="form-group">
                    <label for="username">Имя пользователя</label>
                    <input type="text" class="form-control" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Пароль</label>
                    <input type="password" class="form-control" id="password" required>
                </div>
                <div class="captcha-container">
                    <div class="captcha-code" id="captcha-code">A1B2C3</div>
                    <input type="text" class="form-control captcha-input" id="captcha-input" placeholder="Введите капчу" required>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-secondary" id="cancel-registration">Отмена</button>
                    <button type="submit" class="btn btn-primary">Зарегистрироваться</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Case Opening Animation -->
    <div class="case-opening" id="case-opening">
        <div class="case-reward">
            <div class="reward-image" id="reward-image">🎁</div>
            <div class="reward-name" id="reward-name">Mighty Arm</div>
            <div class="reward-value" id="reward-value">Цена: 10 ★</div>
            <button class="btn btn-primary" id="close-case">Закрыть</button>
        </div>
    </div>

    <script>
        // Game Data
        const casesData = {
            daily: {
                name: "Ежедневный кейс",
                price: 0,
                items: [
                    { name: "Mighty Arm", emoji: "💪", value: 10 },
                    { name: "Desk Calendar", emoji: "📅", value: 15 },
                    { name: "Flying Broom", emoji: "🧹", value: 20 }
                ]
            },
            bomj: {
                name: "Бомжик",
                price: 0,
                items: [
                    { name: "Сердечко", emoji: "❤️", value: 5 },
                    { name: "Мишка", emoji: "🧸", value: 8 },
                    { name: "Роза", emoji: "🌹", value: 12 },
                    { name: "Ракета", emoji: "🚀", value: 18 },
                    { name: "Цветы", emoji: "💐", value: 15 },
                    { name: "Алмаз", emoji: "💎", value: 25 }
                ]
            },
            durov: {
                name: "Durov Case",
                price: 100,
                items: [
                    { name: "Plush Pepe (gold)", emoji: "🐸", value: 50 },
                    { name: "Vintage Sigar", emoji: "💨", value: 40 },
                    { name: "Top Hat", emoji: "🎩", value: 35 },
                    { name: "Perfume Bottle", emoji: "💄", value: 45 }
                ]
            },
            bayrex: {
                name: "BayRex Case",
                price: 150,
                items: [
                    { name: "Plush Pepe (gold)", emoji: "🐸", value: 50 },
                    { name: "Vintage Sigar", emoji: "💨", value: 40 },
                    { name: "Top Hat", emoji: "🎩", value: 35 },
                    { name: "Perfume Bottle", emoji: "💄", value: 45 }
                ]
            }
        };

        // Game State
        let user = {
            email: "",
            username: "",
            balance: 100,
            inventory: [],
            casesOpened: 0,
            isAdmin: false
        };

        // DOM Elements
        const balanceElement = document.getElementById('balance');
        const userAvatar = document.getElementById('user-avatar');
        const dropdownMenu = document.getElementById('dropdown-menu');
        const registrationModal = document.getElementById('registration-modal');
        const registrationForm = document.getElementById('registration-form');
        const cancelRegistration = document.getElementById('cancel-registration');
        const casesBtn = document.getElementById('cases-btn');
        const refreshBtn = document.getElementById('refresh-btn');
        const leadersBtn = document.getElementById('leaders-btn');
        const openCaseBtns = document.querySelectorAll('.open-case-btn');
        const caseOpening = document.getElementById('case-opening');
        const rewardImage = document.getElementById('reward-image');
        const rewardName = document.getElementById('reward-name');
        const rewardValue = document.getElementById('reward-value');
        const closeCase = document.getElementById('close-case');
        const inventoryContainer = document.getElementById('inventory');
        const adminPanel = document.getElementById('admin-panel');
        const setBalanceBtn = document.getElementById('set-balance-btn');
        const usernameInput = document.getElementById('username-input');
        const balanceInput = document.getElementById('balance-input');

        // Initialize the game
        function initGame() {
            // Check if user is registered
            const savedUser = localStorage.getItem('telegramGiftsUser');
            if (savedUser) {
                user = JSON.parse(savedUser);
                updateUI();
            } else {
                // Show registration modal
                registrationModal.classList.add('active');
                generateCaptcha();
            }
        }

        // Generate random captcha
        function generateCaptcha() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let captcha = '';
            for (let i = 0; i < 6; i++) {
                captcha += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            document.getElementById('captcha-code').textContent = captcha;
        }

        // Update UI with user data
        function updateUI() {
            balanceElement.textContent = user.balance;
            
            // Update avatar
            const avatarImg = userAvatar.querySelector('img');
            if (avatarImg) {
                avatarImg.src = user.avatar;
            } else {
                userAvatar.innerHTML = `<span>${user.username.charAt(0).toUpperCase()}</span>`;
            }
            
            // Show admin panel if user is BayRex
            if (user.username === 'BayRex') {
                user.isAdmin = true;
                adminPanel.classList.add('active');
            }
            
            // Update inventory
            renderInventory();
            
            // Save user data
            localStorage.setItem('telegramGiftsUser', JSON.stringify(user));
        }

        // Render inventory items
        function renderInventory() {
            inventoryContainer.innerHTML = '';
            
            if (user.inventory.length === 0) {
                inventoryContainer.innerHTML = '<p>У вас пока нет подарков</p>';
                return;
            }
            
            user.inventory.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = 'inventory-item';
                itemElement.innerHTML = `
                    <div class="item-image">${item.emoji}</div>
                    <div class="item-name">${item.name}</div>
                    <div class="item-value">${item.value} ★</div>
                    <button class="sell-btn" data-index="${index}">Продать за ${item.value} ★</button>
                `;
                inventoryContainer.appendChild(itemElement);
            });
            
            // Add event listeners to sell buttons
            document.querySelectorAll('.sell-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    sellItem(index);
                });
            });
        }

        // Open a case
        function openCase(caseType) {
            const caseData = casesData[caseType];
            
            // Check if user has enough balance for paid cases
            if (caseData.price > 0 && user.balance < caseData.price) {
                alert('Недостаточно звезд для открытия этого кейса!');
                return;
            }
            
            // Deduct balance for paid cases
            if (caseData.price > 0) {
                user.balance -= caseData.price;
            }
            
            // Get random item from case
            const randomIndex = Math.floor(Math.random() * caseData.items.length);
            const reward = caseData.items[randomIndex];
            
            // Add item to inventory
            user.inventory.push(reward);
            user.casesOpened++;
            
            // Update UI
            updateUI();
            
            // Show reward animation
            rewardImage.textContent = reward.emoji;
            rewardName.textContent = reward.name;
            rewardValue.textContent = `Цена: ${reward.value} ★`;
            caseOpening.classList.add('active');
        }

        // Sell an item
        function sellItem(index) {
            const item = user.inventory[index];
            user.balance += item.value;
            user.inventory.splice(index, 1);
            updateUI();
        }

        // Event Listeners
        userAvatar.addEventListener('click', function() {
            dropdownMenu.classList.toggle('active');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.user-profile')) {
                dropdownMenu.classList.remove('active');
            }
        });

        // Registration form submission
        registrationForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const captchaInput = document.getElementById('captcha-input').value;
            const captchaCode = document.getElementById('captcha-code').textContent;
            
            // Validate captcha
            if (captchaInput !== captchaCode) {
                alert('Неверная капча!');
                generateCaptcha();
                return;
            }
            
            // Register user
            user.email = email;
            user.username = username;
            user.balance = 100;
            user.inventory = [];
            user.casesOpened = 0;
            
            // Close registration modal
            registrationModal.classList.remove('active');
            
            // Update UI
            updateUI();
        });

        cancelRegistration.addEventListener('click', function() {
            registrationModal.classList.remove('active');
        });

        // Case opening buttons
        openCaseBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const caseType = this.getAttribute('data-case');
                openCase(caseType);
            });
        });

        // Close case animation
        closeCase.addEventListener('click', function() {
            caseOpening.classList.remove('active');
        });

        // Change avatar
        document.getElementById('change-avatar').addEventListener('click', function() {
            const avatarUrl = prompt('Введите URL вашего аватара:');
            if (avatarUrl) {
                userAvatar.innerHTML = `<img src="${avatarUrl}" alt="Avatar">`;
                user.avatar = avatarUrl;
                updateUI();
            }
        });

        // Promo code
        document.getElementById('promo-code').addEventListener('click', function() {
            const promoCode = prompt('Введите промокод:');
            if (promoCode) {
                // Simple promo code check
                if (promoCode.toUpperCase() === 'TELEGRAM2023') {
                    user.balance += 50;
                    updateUI();
                    alert('Промокод активирован! Вы получили 50 ★');
                } else {
                    alert('Неверный промокод!');
                }
            }
        });

        // Best drop
        document.getElementById('best-drop').addEventListener('click', function() {
            if (user.inventory.length === 0) {
                alert('У вас пока нет подарков!');
                return;
            }
            
            let bestItem = user.inventory[0];
            user.inventory.forEach(item => {
                if (item.value > bestItem.value) {
                    bestItem = item;
                }
            });
            
            alert(`Ваш лучший подарок: ${bestItem.name} (${bestItem.emoji}) стоимостью ${bestItem.value} ★`);
        });

        // Statistics
        document.getElementById('statistics').addEventListener('click', function() {
            alert(`Статистика:\nОткрыто кейсов: ${user.casesOpened}\nКоличество подарков: ${user.inventory.length}`);
        });

        // Admin functionality
        setBalanceBtn.addEventListener('click', function() {
            if (!user.isAdmin) {
                alert('У вас нет прав администратора!');
                return;
            }
            
            const targetUsername = usernameInput.value;
            const newBalance = parseInt(balanceInput.value);
            
            if (!targetUsername || isNaN(newBalance)) {
                alert('Заполните все поля корректно!');
                return;
            }
            
            // In a real app, this would update the balance on the server
            // For this demo, we'll just show a message
            alert(`Баланс пользователя ${targetUsername} установлен на ${newBalance} ★`);
            
            // Clear inputs
            usernameInput.value = '';
            balanceInput.value = '';
        });

        // Initialize the game
        initGame();
    </script>
</body>
</html>